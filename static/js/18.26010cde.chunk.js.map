{"version":3,"sources":["shared/components/CardChart.js"],"names":["labelFormatter","label","format","Date","calculateMin","data","yKey","factor","max","Number","POSITIVE_INFINITY","forEach","element","Math","round","itemHeight","options","withStyles","theme","cardContentInner","marginTop","spacing","withTheme","props","color","title","classes","height","_useState","useState","_useState2","Object","E_EscritorioD_React_cielo2_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_0__","anchorEl","setAnchorEl","_useState3","_useState4","selectedOption","setSelectedOption","handleClick","useCallback","event","currentTarget","formatter","value","getSubtitle","Error","processData","seconds","minSeconds","arr","i","length","timestamp","unshift","handleClose","selectOption","isOpen","Boolean","react__WEBPACK_IMPORTED_MODULE_1___default","a","createElement","_mui_material__WEBPACK_IMPORTED_MODULE_9__","_mui_material__WEBPACK_IMPORTED_MODULE_10__","pt","px","pb","display","justifyContent","_mui_material__WEBPACK_IMPORTED_MODULE_11__","variant","_mui_material__WEBPACK_IMPORTED_MODULE_12__","aria-label","aria-owns","undefined","aria-haspopup","onClick","size","_mui_icons_material_MoreVert__WEBPACK_IMPORTED_MODULE_17___default","_mui_material__WEBPACK_IMPORTED_MODULE_13__","id","open","onClose","PaperProps","style","maxHeight","width","disableScrollLock","map","option","_mui_material__WEBPACK_IMPORTED_MODULE_14__","key","selected","name","_mui_material__WEBPACK_IMPORTED_MODULE_15__","className","recharts__WEBPACK_IMPORTED_MODULE_2__","recharts__WEBPACK_IMPORTED_MODULE_3__","type","recharts__WEBPACK_IMPORTED_MODULE_4__","dataKey","domain","hide","recharts__WEBPACK_IMPORTED_MODULE_5__","recharts__WEBPACK_IMPORTED_MODULE_6__","stroke","fill","recharts__WEBPACK_IMPORTED_MODULE_7__","cursor","contentStyle","border","padding","borderRadius","shape","boxShadow","shadows","labelStyle","typography","body1","itemStyle","fontSize","letterSpacing","fontFamily","lineHeight","fontWeight"],"mappings":"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","file":"static/js/18.26010cde.chunk.js","sourcesContent":["import React, { useState, useCallback } from \"react\";\r\nimport PropTypes from \"prop-types\";\r\nimport {\r\n  AreaChart,\r\n  Area,\r\n  XAxis,\r\n  Tooltip,\r\n  ResponsiveContainer,\r\n  YAxis,\r\n} from \"recharts\";\r\nimport format from \"date-fns/format\";\r\nimport { Card, CardContent, Typography, IconButton, Menu, MenuItem, Box } from \"@mui/material\";\r\nimport withStyles from '@mui/styles/withStyles';\r\nimport MoreVertIcon from \"@mui/icons-material/MoreVert\";\r\n\r\nconst styles = (theme) => ({\r\n  cardContentInner: {\r\n    marginTop: theme.spacing(-4),\r\n  },\r\n});\r\n\r\nfunction labelFormatter(label) {\r\n  return format(new Date(label * 1000), \"MMMM d, p yyyy\");\r\n}\r\n\r\nfunction calculateMin(data, yKey, factor) {\r\n  let max = Number.POSITIVE_INFINITY;\r\n  data.forEach((element) => {\r\n    if (max > element[yKey]) {\r\n      max = element[yKey];\r\n    }\r\n  });\r\n  return Math.round(max - max * factor);\r\n}\r\n\r\nconst itemHeight = 216;\r\nconst options = [\"1 Week\", \"1 Month\", \"6 Months\"];\r\n\r\nfunction CardChart(props) {\r\n  const { color, data, title, classes, theme, height } = props;\r\n  const [anchorEl, setAnchorEl] = useState(null);\r\n  const [selectedOption, setSelectedOption] = useState(\"1 Month\");\r\n\r\n  const handleClick = useCallback(\r\n    (event) => {\r\n      setAnchorEl(event.currentTarget);\r\n    },\r\n    [setAnchorEl]\r\n  );\r\n\r\n  const formatter = useCallback(\r\n    (value) => {\r\n      return [value, title];\r\n    },\r\n    [title]\r\n  );\r\n\r\n  const getSubtitle = useCallback(() => {\r\n    switch (selectedOption) {\r\n      case \"1 Week\":\r\n        return \"Last week\";\r\n      case \"1 Month\":\r\n        return \"Last month\";\r\n      case \"6 Months\":\r\n        return \"Last 6 months\";\r\n      default:\r\n        throw new Error(\"No branch selected in switch-statement\");\r\n    }\r\n  }, [selectedOption]);\r\n\r\n  const processData = useCallback(() => {\r\n    let seconds;\r\n    switch (selectedOption) {\r\n      case \"1 Week\":\r\n        seconds = 60 * 60 * 24 * 7;\r\n        break;\r\n      case \"1 Month\":\r\n        seconds = 60 * 60 * 24 * 31;\r\n        break;\r\n      case \"6 Months\":\r\n        seconds = 60 * 60 * 24 * 31 * 6;\r\n        break;\r\n      default:\r\n        throw new Error(\"No branch selected in switch-statement\");\r\n    }\r\n    const minSeconds = new Date() / 1000 - seconds;\r\n    const arr = [];\r\n    for (let i = 0; i < data.length; i += 1) {\r\n      if (minSeconds < data[i].timestamp) {\r\n        arr.unshift(data[i]);\r\n      }\r\n    }\r\n    return arr;\r\n  }, [data, selectedOption]);\r\n\r\n  const handleClose = useCallback(() => {\r\n    setAnchorEl(null);\r\n  }, [setAnchorEl]);\r\n\r\n  const selectOption = useCallback(\r\n    (selectedOption) => {\r\n      setSelectedOption(selectedOption);\r\n      handleClose();\r\n    },\r\n    [setSelectedOption, handleClose]\r\n  );\r\n\r\n  const isOpen = Boolean(anchorEl);\r\n  return (\r\n    <Card>\r\n      <Box pt={2} px={2} pb={4}>\r\n        <Box display=\"flex\" justifyContent=\"space-between\">\r\n          <div>\r\n            <Typography variant=\"subtitle1\">{title}</Typography>\r\n            <Typography variant=\"body2\" color=\"textSecondary\">\r\n              {getSubtitle()}\r\n            </Typography>\r\n          </div>\r\n          <div>\r\n            <IconButton\r\n              aria-label=\"More\"\r\n              aria-owns={isOpen ? \"long-menu\" : undefined}\r\n              aria-haspopup=\"true\"\r\n              onClick={handleClick}\r\n              size=\"large\">\r\n              <MoreVertIcon />\r\n            </IconButton>\r\n            <Menu\r\n              id=\"long-menu\"\r\n              anchorEl={anchorEl}\r\n              open={isOpen}\r\n              onClose={handleClose}\r\n              PaperProps={{\r\n                style: {\r\n                  maxHeight: itemHeight,\r\n                  width: 200,\r\n                },\r\n              }}\r\n              disableScrollLock\r\n            >\r\n              {options.map((option) => (\r\n                <MenuItem\r\n                  key={option}\r\n                  selected={option === selectedOption}\r\n                  onClick={() => {\r\n                    selectOption(option);\r\n                  }}\r\n                  name={option}\r\n                >\r\n                  {option}\r\n                </MenuItem>\r\n              ))}\r\n            </Menu>\r\n          </div>\r\n        </Box>\r\n      </Box>\r\n      <CardContent>\r\n        <Box className={classes.cardContentInner} height={height}>\r\n          <ResponsiveContainer width=\"100%\" height=\"100%\">\r\n            <AreaChart data={processData()} type=\"number\">\r\n              <XAxis\r\n                dataKey=\"timestamp\"\r\n                type=\"number\"\r\n                domain={[\"dataMin\", \"dataMax\"]}\r\n                hide\r\n              />\r\n              <YAxis\r\n                domain={[calculateMin(data, \"value\", 0.05), \"dataMax\"]}\r\n                hide\r\n              />\r\n              <Area\r\n                type=\"monotone\"\r\n                dataKey=\"value\"\r\n                stroke={color}\r\n                fill={color}\r\n              />\r\n              <Tooltip\r\n                labelFormatter={labelFormatter}\r\n                formatter={formatter}\r\n                cursor={false}\r\n                contentStyle={{\r\n                  border: \"none\",\r\n                  padding: theme.spacing(1),\r\n                  borderRadius: theme.shape.borderRadius,\r\n                  boxShadow: theme.shadows[1],\r\n                }}\r\n                labelStyle={theme.typography.body1}\r\n                itemStyle={{\r\n                  fontSize: theme.typography.body1.fontSize,\r\n                  letterSpacing: theme.typography.body1.letterSpacing,\r\n                  fontFamily: theme.typography.body1.fontFamily,\r\n                  lineHeight: theme.typography.body1.lineHeight,\r\n                  fontWeight: theme.typography.body1.fontWeight,\r\n                }}\r\n              />\r\n            </AreaChart>\r\n          </ResponsiveContainer>\r\n        </Box>\r\n      </CardContent>\r\n    </Card>\r\n  );\r\n}\r\n\r\nCardChart.propTypes = {\r\n  color: PropTypes.string.isRequired,\r\n  data: PropTypes.array.isRequired,\r\n  title: PropTypes.string.isRequired,\r\n  classes: PropTypes.object.isRequired,\r\n  theme: PropTypes.object.isRequired,\r\n  height: PropTypes.string.isRequired,\r\n};\r\n\r\nexport default withStyles(styles, { withTheme: true })(CardChart);\r\n"],"sourceRoot":""}